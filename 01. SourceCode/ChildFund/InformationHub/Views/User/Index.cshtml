@{
    ViewBag.Title = InformationHub.Resource.Resource.User_List;
    Layout = "~/Views/Shared/_Layout.cshtml";
    bool allowedIport = ViewBag.allowedIport;
}

<section class="wrapper main-wrapper">
    <div ui-view="" class="ng-scope">
        <div class="content-wrapper">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <section class="box collapsed">
                    <header class="panel_header">
                        <h2 class="title pull-left">@InformationHub.Resource.Resource.Search_Title</h2>
                        <div class="actions panel_actions pull-right">
                            <i class="box_toggle material-icons">expand_more</i>
                        </div>
                    </header>
                    <div class="content-body padding-bottom-10">
                        <div class="row">
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <div class="form-group">
                                    <label class="form-label">@InformationHub.Resource.Resource.User_Type</label>
                                    <div class="controls">
                                        <select class="form-control" id="Type">
                                            <option selected value="">@InformationHub.Resource.Resource.All_Title</option>
                                            <option value="0">@InformationHub.Resource.Resource.GroupUser_Type_Admin</option>
                                            <option value="1">@InformationHub.Resource.Resource.GroupUser_Type_Province</option>
                                            <option value="2">@InformationHub.Resource.Resource.GroupUser_Type_District</option>
                                            <option value="3">@InformationHub.Resource.Resource.GroupUser_Type_Ward</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <div class="form-group">
                                    <label class="form-label" for="field-1">@InformationHub.Resource.Resource.User_Acc</label>
                                    <span class="desc"></span>
                                    <div class="controls">
                                        <input type="text" class="form-control" id="userNameSearch">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <div class="form-group">
                                    <label class="form-label" for="field-1">@InformationHub.Resource.Resource.Label_Name</label>
                                    <span class="desc"></span>
                                    <div class="controls">
                                        <input type="text" class="form-control" id="fullNameSearch">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <div class="form-group">
                                    <label class="form-label">@InformationHub.Resource.Resource.Area_Province</label>
                                    <select class="form-control" id="provinceId" onchange="GetDistrict()">
                                        <option selected value="">@InformationHub.Resource.Resource.All_Title</option>
                                        @Html.Action("ProvinceCBB", "Combobox")
                                    </select>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <div class="form-group">
                                    <label class="form-label">@InformationHub.Resource.Resource.Label_District</label>
                                    <select class="form-control" id="districtId" onchange="GetWard()">
                                        <option selected value="">@InformationHub.Resource.Resource.All_Title</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <div class="form-group">
                                    <label class="form-label">@InformationHub.Resource.Resource.Label_Ward</label>
                                    <select class="form-control" id="wardId">
                                        <option selected value="">@InformationHub.Resource.Resource.All_Title</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-6 text-right">
                                <div class="form-group margin-top-20">
                                    <button onclick="Search(0)" type="button" class="btn btn-success btn-icon right10">
                                        <i class="fa fa-search"></i> &nbsp; <span>@InformationHub.Resource.Resource.Search_Title</span>
                                    </button>
                                    <button onclick="Refresh()" type="button" class="btn btn-default btn-icon">
                                        <i class="fa fa-refresh"></i> &nbsp; <span>@InformationHub.Resource.Resource.Reset_Title</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="col-lg-12 col-md-12">
                <section class="box ">
                    <header class="panel_header">
                        <h2 class="title pull-left">@InformationHub.Resource.Resource.User_List</h2>
                        <div class="actions panel_actions pull-right">
                            <i class="box_toggle material-icons">expand_more</i>
                        </div>
                    </header>
                    <div class="content-body padding-bottom-10">
                        <div class="row margin-bottom-5">
                            <div class="col-md-4 col-sm-4 col-xs-4 text-left">
                                <h4>
                                    @InformationHub.Resource.Resource.Total_Title <b class="badge badge-primary" id="count_user"></b> @InformationHub.Resource.Resource.User
                                </h4>
                            </div>
                            <div class="col-md-8 col-sm-8 col-xs-8 text-right">
                                <a href="#" id="linkDonwload"></a>
                                @if (allowedIport)
                                {
                                    <button onclick="ShowImportProfile()" title="Nhập tài khoản" class="btn btn-warning btn-icon">
                                        <i class="fa fa-file-excel-o"></i> @InformationHub.Resource.Resource.Import_Account
                                    </button>
                                }
                                <button class="btn btn-info btn-icon right10" type="button" onclick="Search(1)">
                                    <i class="fa fa-file-excel-o" aria-hidden="true"></i> &nbsp; <span>@InformationHub.Resource.Resource.Export_Title</span>
                                </button>
                                @*<a class="btn btn-info btn-icon right10" href="/user/importexcel">
                                        <i class="fa fa-file-excel-o" aria-hidden="true"></i> &nbsp; <span>@InformationHub.Resource.Resource.Import_Title</span>
                                    </a>
                                    <a href="#" id="linkDownloadTemplate"></a>
                                    <button class="btn btn-info btn-icon right10" type="button" onclick="DownloadTemplate()">
                                        <i class="fa fa-file-excel-o" aria-hidden="true"></i> &nbsp; <span>@InformationHub.Resource.Resource.Download_UserTemplate</span>
                                    </button>*@
                                @if (InformationHub.Common.LoginCommon.CheckPermission("C0002"))
                                {
                                    <a href="/user/createuserview" class="btn btn-success btn-icon right10">
                                        <i class="fa fa-plus"></i> &nbsp; <span>@InformationHub.Resource.Resource.Add_Title</span>
                                    </a>
                                }
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <div class="margin-bottom-10" id="list_user">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 margin-bottom-10">
                                <hr class="margin-bottom-10 margin-top-0" />
                                <button class="btn btn-xs btnfuntion" title="@InformationHub.Resource.Resource.User_Reset_Password">
                                    <i class="material-icons btnfuntion" style="color:mediumaquamarine">cached</i>
                                </button>&nbsp;
                                <small class="padding-right-20">@InformationHub.Resource.Resource.User_Reset_Password</small>

                                <button type="button" class="btn btn-xs btnfuntion" title="@InformationHub.Resource.Resource.User_Update_Title">
                                    <i class="material-icons btnicon" style="color:orange">edit</i>
                                </button>&nbsp;
                                <small class="padding-right-20">@InformationHub.Resource.Resource.User_Update_Title</small>

                                <button type="button" class="btn btn-xs btnfuntion" title="@InformationHub.Resource.Resource.User_Lock">
                                    <i class="material-icons btnicon" style="color:red">lock</i>
                                </button>&nbsp;
                                <small class="padding-right-20">@InformationHub.Resource.Resource.User_Lock</small>

                                <button type="button" class="btn btn-xs btnfuntion" title="@InformationHub.Resource.Resource.User_Unlock">
                                    <i class="material-icons btnicon" style="color:red">lock_open</i>
                                </button>&nbsp;
                                <small class="padding-right-20">@InformationHub.Resource.Resource.User_Unlock</small>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</section>

<div id="modalResetPassword" class="modal fade" role="dialog" tabindex="-1" onscroll="scroll" data-backdrop="static" style="background-color: rgba(0,0,0,0.3)">
    <div class="modal-dialog modal-sm popresetpass">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" onclick="CloseModelRS()">&times;</button>
                <h4 class="h4Title">@InformationHub.Resource.Resource.User_Reset_Password</h4>
            </div>
            <div class="modal-body">
                <input type="hidden" id="rsUserId" />
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12 no-padding">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span class="input-icon icon-right">
                                    <label>@InformationHub.Resource.Resource.User_Acc</label>&nbsp;<span class="required">*</span>
                                    <input type="text" class="form-control" id="rsUserName">
                                </span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span class="input-icon icon-right">
                                    <label>@InformationHub.Resource.Resource.Label_Name</label>&nbsp;<span class="required">*</span>
                                    <input type="text" class="form-control" id="rsFullName">
                                </span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span class="input-icon icon-right">
                                    <label>@InformationHub.Resource.Resource.Authorzie_Password</label>&nbsp;<span class="required">*</span>
                                    <input type="password" class="form-control" id="rsPassword">
                                </span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span class="input-icon icon-right">
                                    <label>@InformationHub.Resource.Resource.Authorize_Confirm_Password</label>&nbsp;<span class="required">*</span>
                                    <input type="password" class="form-control" id="rsRetypepassword">
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" onclick="Reset()" class="btn btn-primary" id="btn-reset"><i class="glyphicon glyphicon-floppy-save"></i>@InformationHub.Resource.Resource.Save_Title</button>
                <button type="button" class="btn btn-danger" onclick="CloseModelRS()"><i class="glyphicon glyphicon-minus-sign"></i>@InformationHub.Resource.Resource.Exit_Title</button>
            </div>
        </div>
    </div>
</div>
<div id="modamImport" class="modal fade" role="dialog" onscroll="scroll" data-backdrop="static" style="background-color: rgba(0,0,0,0.3)">
    <div class="modal-dialog" style="width:600px">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="h4Title">@InformationHub.Resource.Resource.Import_Account_Excel</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <input type="text" id="fileImport" readonly style="width:62%; border-bottom:0px" value="" placeholder="Chọn file excel/ Choose file excel" />
                        <button type="button" style="float:right;width:35%;margin-bottom:5px" onclick="$('#fileSelectImport').click()" class="btn btn-primary" id="btn-createContinue"><i class="glyphicon glyphicon-floppy-save"></i> @InformationHub.Resource.Resource.Select_File</button>
                        <input type="file" style="display:none" id="fileSelectImport" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="ImportProfile()" style="cursor:pointer" class="btn btn-primary" id="btn-createContinue"><i class="glyphicon glyphicon-floppy-save"></i> @InformationHub.Resource.Resource.Save_Title</button>
                    <button type="button" class="btn btn-danger" style="cursor:pointer" data-dismiss="modal"><i class="glyphicon glyphicon-minus-sign"></i> @InformationHub.Resource.Resource.Exit_Title</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/controller/UserControllers.js"></script>
<script>
    $('#count_user').html(@ViewBag.TotalItem);
    $('#pageSize').val(@ViewBag.PageSize);
    window.onload = Search(0);
</script>